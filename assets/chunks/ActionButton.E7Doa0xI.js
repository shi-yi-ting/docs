import{_ as c}from"./useConfigInject.TplfaHhS.js";import{c as O,B as g}from"./index.2TiL6dyJ.js";import{h as f,c6 as y,d as P,l as k,I as x}from"./framework.FpOEJISx.js";var F=function(){var e=f(!1);return y(function(){e.value=!0}),e},R={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Object,emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function p(r){return!!(r&&r.then)}const A=P({compatConfig:{MODE:3},name:"ActionButton",props:R,setup:function(e,B){var C=B.slots,u=f(!1),v=f(),l=f(!1),d,m=F();k(function(){e.autofocus&&(d=setTimeout(function(){var n;return(n=v.value.$el)===null||n===void 0?void 0:n.focus()}))}),y(function(){clearTimeout(d)});var b=function(o){var t=e.close;p(o)&&(l.value=!0,o.then(function(){m.value||(l.value=!1),t.apply(void 0,arguments),u.value=!1},function(i){console.error(i),m.value||(l.value=!1),u.value=!1}))},h=function(o){var t=e.actionFn,i=e.close,s=i===void 0?function(){}:i;if(!u.value){if(u.value=!0,!t){s();return}var a;if(e.emitEvent){if(a=t(o),e.quitOnNullishReturnValue&&!p(a)){u.value=!1,s(o);return}}else if(t.length)a=t(s),u.value=!1;else if(a=t(),!a){s();return}b(a)}};return function(){var n=e.type,o=e.prefixCls,t=e.buttonProps;return x(g,c(c(c({},O(n)),{},{onClick:h,loading:l.value,prefixCls:o},t),{},{ref:v}),C)}}});export{A};
